(this["webpackJsonpguiding-star-frontend"]=this["webpackJsonpguiding-star-frontend"]||[]).push([[0],{179:function(e,t,n){},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return x})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return _})),n.d(t,"h",(function(){return y}));var c=n(0),s=n(23),r=n(142),a=n(269),i=n(41),l=n(162),o=n(154),j=n.n(o),b=n(270),u=n(33),d=n(1);function O(e){var t=e.text,n=e.width;return Object(d.jsx)("span",{className:"capped-text",style:{maxWidth:n+"px"},children:t})}function h(e){for(var t="qwertyuiopasdfghjkzxcvbnmQWERTYUPASDFGHJKLZXCVBNM23456789",n="",c=0;c<e;c++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function x(e){r.b.loading({content:"\u6b63\u5728\u524d\u5f80\u767b\u5f55\u9875\u9762\u2026",key:"Utils.ToAuth",duration:15}),setTimeout((function(){window.location.href=u.b+e}),100)}function m(e){return e<10?"0"+e:""+e}function f(e){var t=new Date(1e3*e);return"".concat(m(t.getMonth()+1),"-").concat(m(t.getDate()))+" ".concat(m(t.getHours()),":").concat(m(t.getMinutes()),":").concat(m(t.getSeconds()))}var p=j()({prefixAgo:null,prefixFromNow:"",suffixAgo:function(e,t){return t<59500?"\u521a\u521a":"\u524d"},suffixFromNow:function(e,t){return-t<59500?"1\u5206\u949f\u4e4b\u5185":"\u540e"},seconds:"\u200b",minute:"1\u5206\u949f",minutes:"%d\u5206\u949f",hour:"1\u5c0f\u65f6",hours:"%d\u5c0f\u65f6",day:"1\u5929",days:"%d\u5929",month:"1\u4e2a\u6708",months:"%d\u6708",year:"1\u5e74",years:"%d\u5e74",wordSeparator:""});function g(e){var t=e.ts,n=e.delta,c=void 0===n?0:n;return Object(d.jsx)(l.a,{date:1e3*(t+c),formatter:p,title:f(t)})}function v(){var e=Object(s.f)(),t=Object(s.g)();return Object(d.jsx)(a.a,{icon:Object(d.jsx)(b.a,{}),status:"error",title:"\u9875\u9762\u4e0d\u5b58\u5728",subTitle:Object(d.jsx)(O,{text:e.pathname,width:300}),extra:[Object(d.jsx)(i.a,{onClick:function(){return t("/")},children:"\u8fd4\u56de\u4e3b\u9875"},"home")]})}function _(e){var t=e.href,n=e.children;return Object(d.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:n})}function y(e){var t=Object(c.useRef)(0),n=Object(c.useRef)(null);return Object(c.useEffect)((function(){t.current=+new Date}),[]),[t.current/1e3,function(){n.current&&(n.current.disabled=!0),t.current=+new Date,setTimeout((function(){+new Date-t.current>=1e3*e-200&&n.current&&(n.current.disabled=!1)}),1e3*e)},n]}},247:function(e,t,n){},248:function(e,t,n){},254:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(39),r=n.n(s),a=n(12),i=n(278),l=n(67),o=n(6),j=n(68),b=n(41),u=n(269),d=n(281),O=n(282),h=n(45),x=n(33),m=n(22),f="wish.2022.v1",p=Object(m.f)(4);function g(e,t){return new Promise((function(n){fetch(x.i+e+(e.includes("?")?"&":"?")+"tabid="+p,{method:"POST",credentials:"include",headers:{"X-Wish-Version":f,"Content-Type":"application/json"},body:t?JSON.stringify(t):"{}"}).then((function(e){return 200!==e.status?{error:"HTTP_ERROR",error_msg:"HTTP \u9519\u8bef ".concat(e.status)}:e.json()})).then((function(e){n(e)})).catch((function(e){n({error:"HTTP_REQ_FAILED",error_msg:"\u7f51\u7edc\u9519\u8bef ".concat(e)})}))}))}function v(e,t){var n=Object(c.useState)(null),s=Object(o.a)(n,2),r=s[0],a=s[1],i=Object(c.useState)(null),l=Object(o.a)(i,2),j=l[0],b=l[1],u=Object(c.useCallback)((function(){b(null),a(null),g(e,t).then((function(e){e.error?a(e):(a(null),b(e))}))}),[e,t]);return Object(c.useEffect)((function(){u()}),[u]),[r,j,u]}window._TABID=p;var _=n(1);function y(e){var t=e.set_info,n=v("game_info"),s=Object(o.a)(n,3),r=s[0],a=s[1],i=s[2];Object(c.useEffect)((function(){t(a)}),[t,a]);var l=Object(_.jsx)(b.a,{type:"primary",onClick:i,children:"\u91cd\u8bd5"},"refresh");return Object(_.jsx)("div",{className:"result-page-container",children:r?"HTTP_REQ_FAILED"===r.error?Object(_.jsx)(u.a,{icon:Object(_.jsx)(d.a,{}),status:"error",title:"\u7f51\u7edc\u9519\u8bef",subTitle:r.error_msg,extra:[l]}):"WISH_VERSION_MISMATCH"===r.error?Object(_.jsx)(u.a,{icon:Object(_.jsx)(O.a,{}),status:"error",title:"API \u7248\u672c\u66f4\u65b0",subTitle:r.error_msg,extra:[Object(_.jsx)(b.a,{type:"primary",onClick:function(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then((function(e){var t,n=Object(j.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value;console.log("unregister",c),c.unregister()}}catch(s){n.e(s)}finally{n.f()}})),setTimeout((function(){window.location.reload(!0)}),150)},children:"\u5237\u65b0\u9875\u9762\uff08\u53ef\u80fd\u9700\u8981\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58\uff09"},"refresh")]}):Object(_.jsx)(u.a,{status:"error",title:"\u9519\u8bef",subTitle:r.error_msg,extra:[l]}):Object(_.jsx)(u.a,{icon:Object(_.jsx)(h.a,{}),subTitle:"\u83b7\u53d6\u6bd4\u8d5b\u4fe1\u606f"})})}function k(e){var t=e.message,n=e.reload;return Object(_.jsx)(i.a,{type:"error",showIcon:!0,message:t,action:Object(_.jsx)(b.a,{onClick:n,children:"\u91cd\u8bd5"})})}var w=n(2),N=n(13),I=n(14),C=n(165),T=n(142),E=n(283),S=n(284),F=n(285),R=n(91),A=(n(179),function(){function e(t){var n=this;Object(N.a)(this,e),this.ws=null,this.stopped=!1,this.count_reconnect=0,this.reload_info=t,setTimeout((function(){n.connect()}),2e3)}return Object(I.a)(e,[{key:"handle_message",value:function(e){var t=this,n={key:"notification-".concat(+new Date),className:"push-notif"};"new_announcement"===e.type?C.a.info(Object(w.a)(Object(w.a)({},n),{},{icon:Object(_.jsx)(E.a,{}),message:"\u6bd4\u8d5b\u516c\u544a",description:"\u6709\u65b0\u7684\u516c\u544a\u3010".concat(e.title,"\u3011")})):"tick_update"===e.type?setTimeout((function(){C.a.info(Object(w.a)(Object(w.a)({},n),{},{icon:Object(_.jsx)(S.a,{}),message:"\u8d5b\u7a0b\u63d0\u9192",description:e.new_tick_name.replace(/;/,"\uff0c")})),t.reload_info()}),200+1300*Math.random()):"flag_first_blood"===e.type?C.a.success(Object(w.a)(Object(w.a)({},n),{},{icon:Object(_.jsx)(F.a,{}),message:"Flag \u4e00\u8840\u63d0\u9192",description:"\u606d\u559c\u3010".concat(e.nickname,"\u3011\u5728\u3010").concat(e.board_name,"\u3011\u4e2d\u62ff\u5230\u4e86\u9898\u76ee\u3010").concat(e.challenge,"\u3011\u7684\u3010").concat(e.flag,"\u3011\u7684\u4e00\u8840")})):"challenge_first_blood"===e.type&&C.a.success(Object(w.a)(Object(w.a)({},n),{},{icon:Object(_.jsx)(F.a,{}),message:"\u9898\u76ee\u4e00\u8840\u63d0\u9192",description:"\u606d\u559c\u3010".concat(e.nickname,"\u3011\u5728\u3010").concat(e.board_name,"\u3011\u4e2d\u62ff\u5230\u4e86\u9898\u76ee\u3010").concat(e.challenge,"\u3011\u7684\u4e00\u8840")}))}},{key:"connect",value:function(){var e=this;if(!this.stopped){var t=new URL(x.k+"push?tabid="+p,window.location.href);t.protocol="http:"===t.protocol?"ws:":"wss:",this.ws=new WebSocket(t.href),console.log("PushClient: connecting to ".concat(t.href));var n=null;this.ws.onopen=function(t){console.log("PushClient: socket opened"),n=setTimeout((function(){e.count_reconnect=0}),25e3)},this.ws.onclose=function(t){if(4337===t.code)return console.log("PushClient: socket closed by server, will not retry",t.reason),void(e.stopped=!0);console.log("PushClient: socket closed, will reconnect later",t),setTimeout((function(){e.count_reconnect<8?(e.count_reconnect++,e.connect()):(T.b.error({content:"\u6d88\u606f\u63a8\u9001\u8fde\u63a5\u4e2d\u65ad",key:"PushDaemon.Error",duration:3}),console.log("PushClient: stopped reconnecting"))}),5e3),null!=n&&clearTimeout(n)},this.ws.onmessage=function(t){e.handle_message(JSON.parse(t.data))}}}},{key:"stop",value:function(){this.stopped=!0,null!==this.ws&&this.ws.close()}}],[{key:"init",value:function(){C.a.config({duration:7,placement:"topRight",maxCount:4,top:70,closeIcon:Object(_.jsx)(R.a,{})})}}]),e}());function W(e){var t=e.info,n=e.reload_info;return Object(c.useEffect)((function(){A.init()}),[]),Object(c.useEffect)((function(){if(null!==t&&t.feature.push){var e=new A(n);return function(){e.stop()}}}),[t,n]),null}var P=Object(c.createContext)({info:{user:{id:null,group_disp:"",token:"",profile:{nickname:"",gender:"",tel:"",email:"",qq:"",comment:""},terms_agreed:!1},feature:{game:!1,push:!1,templates:[]}},reload_info:function(){}});function L(e){var t=e.children,n=Object(c.useState)(null),s=Object(o.a)(n,2),r=s[0],a=s[1];function i(){a(null)}return Object(_.jsxs)(P.Provider,{value:{info:r,reload_info:i},children:[null!==r&&r.feature.push?Object(_.jsx)(W,{info:r,reload_info:i}):null,null===r?Object(_.jsx)(y,{set_info:a}):t]})}function M(){return Object(c.useContext)(P).info}var H=n(23),D=n(79),z=n(305),G=n(318),B=n(319),U=n(273);function Y(){return Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsx)("h1",{children:"\u5f00\u6e90\u8bb8\u53ef\u8bc1"}),Object(_.jsxs)(U.a,{children:[Object(_.jsx)("p",{children:Object(_.jsx)("b",{children:"\u5173\u4e8e\u672c\u5e73\u53f0\u7684\u4f7f\u7528\u8bb8\u53ef\uff1a"})}),Object(_.jsxs)("p",{children:["Guiding Star \u662f\u4e3a\u4e86 PKU GeekGame \u800c\u5f00\u53d1\u7684 CTF \u6bd4\u8d5b\u5e73\u53f0\uff0c",Object(_.jsx)(m.b,{href:"https://github.com/PKU-GeekGame/guiding-star",children:"\u5728 GitHub \u5f00\u653e\u6e90\u4ee3\u7801"}),"\u3002"]}),Object(_.jsx)("p",{children:"\u5141\u8bb8\u4efb\u4f55\u4eba\u5728 MIT \u534f\u8bae\uff08\u5982\u4e0b\uff09\u7684\u8981\u6c42\u4e0b\u90e8\u7f72\u6216\u4e8c\u6b21\u5f00\u53d1\u672c\u5e73\u53f0\u3002"}),Object(_.jsx)("p",{children:"Copyright (c) 2022 @xmcp, and other members from PKUGGG Team"}),Object(_.jsx)("p",{children:'Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:'}),Object(_.jsx)("p",{children:"The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software."}),Object(_.jsx)("p",{children:'THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'}),Object(_.jsxs)("p",{children:["\u5e73\u53f0\u524d\u7aef\u90e8\u5206\u4f7f\u7528\u4e86\u6309\u7167 MIT \u534f\u8bae\u5f00\u6e90\u7684"," ",Object(_.jsx)(m.b,{href:"https://github.com/facebook/react/blob/main/LICENSE",children:"React"}),"\u3001",Object(_.jsx)(m.b,{href:"https://github.com/remix-run/react-router/blob/main/LICENSE.md",children:"React-Router"}),"\u3001",Object(_.jsx)(m.b,{href:"https://github.com/nmn/react-timeago/blob/master/LICENSE",children:"React-TimeAgo"}),"\u3001",Object(_.jsx)(m.b,{href:"https://github.com/ant-design/ant-design/blob/master/LICENSE",children:"Ant-Design"}),"\u3001",Object(_.jsx)(m.b,{href:"https://github.com/ant-design/ant-design-charts/blob/master/LICENSE",children:"Ant-Design-Charts"})," \u548c"," ",Object(_.jsx)(m.b,{href:"https://github.com/sudodoki/copy-to-clipboard/blob/master/LICENSE",children:"copy-to-clipboard"})," ","\u7b49\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u3002"]}),Object(_.jsx)("p",{children:"\u5e73\u53f0\u540e\u7aef\u90e8\u5206\u4f7f\u7528\u7684\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u5217\u8868\u53c2\u89c1\u540e\u7aef\u4ee3\u7801\u3002"})]}),Object(_.jsx)("br",{}),Object(_.jsxs)(U.a,{children:[Object(_.jsx)("p",{children:Object(_.jsx)("b",{children:"\u5173\u4e8e\u6bd4\u8d5b\u5185\u5bb9\u7684\u4f7f\u7528\u8bb8\u53ef\uff1a"})}),x.c]})]})}var K=n(271),q=n(57),V=n(279),Q=n(276),J=n(293),X=n(294),Z=n(295);function $(e){var t=e.children;return Object(_.jsx)(V.a,{color:"blue",children:t})}var ee=n(286),te=n(287),ne=n(288),ce=n(289);n(247);function se(e){var t=e.status;return"untouched"===t?Object(_.jsx)(ee.a,{className:"challenge-icon-untouched"}):"partial"===t?Object(_.jsx)(te.a,{className:"challenge-icon-partial",twoToneColor:"#1e63bd"}):"passed"===t?Object(_.jsx)(ne.a,{className:"challenge-icon-passed",twoToneColor:"#1ab500"}):"??"}function re(e){var t=e.status;return"untouched"===t?Object(_.jsx)(ce.a,{className:"flag-icon-passed",twoToneColor:"#a7a7a7"}):"passed"===t?Object(_.jsx)(ce.a,{className:"flag-icon-passed",twoToneColor:"#1ab500"}):"??"}n(248);var ae=n(290),ie=n(291),le=n(292);function oe(e){var t=e.badges;if(0===t.length)return null;var n,c=[],s=Object(j.a)(t);try{for(s.s();!(n=s.n()).done;){var r=n.value;"girl"===r?c.push(Object(_.jsx)(q.a,{title:"\u5177\u6709\u5973\u751f\u7279\u522b\u5956\u8d44\u683c",children:Object(_.jsx)(ae.a,{twoToneColor:"#eb2f96"})},r)):"rookie"===r?c.push(Object(_.jsx)(q.a,{title:"\u5177\u6709\u65b0\u751f\u7279\u522b\u5956\u8d44\u683c",children:Object(_.jsx)(ie.a,{})},r)):r.startsWith("remark:")?c.push(Object(_.jsx)(q.a,{title:r.substring(7),children:Object(_.jsx)(le.a,{twoToneColor:"#ff6600"})},r)):c.push(Object(_.jsxs)("span",{children:["[",r,"]"]},r))}}catch(a){s.e(a)}finally{s.f()}return Object(_.jsx)("span",{className:"user-badges",children:c})}var je=Object(c.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,545))}));function be(e){var t=e.ch,n=e.record;return Object(_.jsxs)("div",{children:[Object(_.jsxs)("p",{children:[Object(_.jsx)("b",{children:t.title})," (",t.category,")"]}),t.flags.map((function(e,c){var s=n.flag_status["".concat(t.key,"_").concat(c)]||null;return Object(_.jsxs)("p",{children:[Object(_.jsx)(re,{status:null===s?"untouched":"passed"})," ",e,"\uff1a",null===s?"\u5c1a\u672a\u901a\u8fc7":"(+".concat(s.gained_score,") ").concat(Object(m.e)(s.timestamp_s))]},c)}))]})}function ue(){return Object(_.jsx)("div",{className:"topstar-plot-loading",children:Object(_.jsxs)("p",{children:[Object(_.jsx)(h.a,{})," \u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6"]})})}function de(e){var t=e.name,n=t.indexOf(" #");if(n<=0)return Object(_.jsx)("span",{className:"name-base-part",children:t});var c=t.substring(0,n),s=t.substring(n);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{className:"name-base-part",children:c}),Object(_.jsx)("span",{className:"name-tag-part",children:s})]})}function Oe(e){var t=e.data;return Object(_.jsxs)("div",{children:[Object(_.jsx)(i.a.ErrorBoundary,{children:Object(_.jsx)(c.Suspense,{fallback:Object(_.jsx)(ue,{}),children:Object(_.jsx)(je,{data:t})})}),Object(_.jsx)("br",{}),Object(_.jsxs)(K.a,{size:"small",dataSource:t.list,pagination:!1,rowKey:"rank",scroll:{x:"max-content"},children:[Object(_.jsx)(K.a.Column,{title:"#",dataIndex:"rank"}),Object(_.jsx)(K.a.Column,{title:"\u6635\u79f0",render:function(e,t){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(de,{name:t.nickname}),null===t.group_disp?null:Object(_.jsxs)(_.Fragment,{children:["\xa0\xa0",Object(_.jsx)($,{children:t.group_disp})]}),Object(_.jsx)(oe,{badges:t.badges})]})}},"name"),Object(_.jsx)(K.a.Column,{title:"\u603b\u5206",dataIndex:"score",render:function(e){return Object(_.jsx)("b",{children:e})}}),Object(_.jsx)(K.a.Column,{title:"\u6700\u540e\u63d0\u4ea4\u65f6\u95f4",dataIndex:"last_succ_submission_ts",render:function(e){return Object(m.e)(e)}}),Object(_.jsx)(K.a.Column,{title:"\u7b54\u9898\u8fdb\u5ea6",render:function(e,n){return t.challenges.map((function(e){return Object(_.jsx)(q.a,{trigger:"hover",destroyTooltipOnHide:!0,title:Object(_.jsx)(be,{ch:e,record:n}),placement:"topRight",align:{offset:[10,8]},mouseEnterDelay:0,mouseLeaveDelay:0,overlayClassName:"board-challenge-status-tooltip",autoAdjustOverflow:!1,children:Object(_.jsx)("div",{className:"board-challenge-status-icon",children:Object(_.jsx)(se,{status:n.challenge_status[e.key]})})},e.key)}))}},"challenges")]})]})}function he(e){var t=e.data.list.flatMap((function(e){return e.flags.map((function(t,n){return Object(w.a)(Object(w.a)({},t),{},{challenge_title:e.title,challenge_metadata:e.metadata,flags_count:e.flags.length,flag_idx0:n,key:"".concat(e.key,"_").concat(n)})}))}));return Object(_.jsxs)(K.a,{size:"small",dataSource:t,pagination:!1,rowKey:"key",scroll:{x:"max-content"},children:[Object(_.jsx)(K.a.Column,{title:"\u9898\u76ee",dataIndex:"challenge_title",render:function(e){return Object(_.jsx)("b",{children:e})},onCell:function(e){return{rowSpan:0===e.flag_idx0?e.flags_count:0}}}),Object(_.jsx)(K.a.Column,{title:"Flag",dataIndex:"flag_name",render:function(e,t){return Object(_.jsxs)(_.Fragment,{children:[null===e?t.flags_count>1?"\u89e3\u51fa\u6240\u6709 Flag":"\u89e3\u51fa Flag":e,!(null!==e||!t.challenge_metadata.first_blood_award_eligible)&&Object(_.jsxs)(q.a,{title:"\u9996\u4e2a\u5b8c\u5168\u89e3\u51fa\u7684\u6821\u5185\u9009\u624b\u53ef\u83b7\u5f97\u6b64\u9898\u7684\u89e3\u9898\u5148\u950b\u5956",children:[" ",Object(_.jsxs)(V.a,{color:"#a00",children:[Object(_.jsx)(J.a,{twoToneColor:"red"})," \u89e3\u9898\u5148\u950b\u5956"]})]})]})}}),Object(_.jsx)(K.a.Column,{title:"\u4e00\u8840\u83b7\u5f97\u8005",render:function(e,t){return null!==t.nickname&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(de,{name:t.nickname}),null===t.group_disp?null:Object(_.jsxs)(_.Fragment,{children:["\xa0\xa0",Object(_.jsx)($,{children:t.group_disp})]}),Object(_.jsx)(oe,{badges:t.badges})]})}},"user"),Object(_.jsx)(K.a.Column,{title:"\u63d0\u4ea4\u65f6\u95f4",dataIndex:"timestamp",render:function(e){return null===e?null:Object(m.e)(e)}})]})}function xe(e){var t=e.data;return"score"===t.type?Object(_.jsx)(Oe,{data:t}):"firstblood"===t.type?Object(_.jsx)(he,{data:t}):Object(_.jsx)(i.a,{type:"error",message:"\u672a\u77e5\u6392\u884c\u699c\u7c7b\u578b ".concat(t.type),showIcon:!0})}function me(e){var t=v("board/"+e.name),n=Object(o.a)(t,3),c=n[0],s=n[1],r=n[2],a=Object(m.h)(3),l=Object(o.a)(a,3),j=l[0],u=l[1],d=l[2];return c?Object(_.jsx)(k,{message:c.error_msg,reload:function(){u(),r()}}):Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"board-reloader",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)(X.a,{})," ",0!==j&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(m.d,{ts:j}),"\u66f4\u65b0\uff08",Object(m.e)(j),"\uff09"]})]}),Object(_.jsx)("div",{children:Object(_.jsxs)(b.a,{type:"link",ref:d,onClick:function(){T.b.success({content:"\u5df2\u5237\u65b0\u6392\u884c\u699c",key:"Board.ManualLoadData",duration:2}),u(),r()},children:[Object(_.jsx)(Z.a,{})," \u5237\u65b0\u6392\u884c\u699c"]})})]}),null===s?Object(_.jsx)(Q.a,{}):Object(_.jsxs)("div",{children:[!!s.desc&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(i.a,{type:"info",message:s.desc,showIcon:!0}),Object(_.jsx)("br",{})]}),Object(_.jsx)(xe,{data:s})]})]})}function fe(){var e=v("submissions"),t=Object(o.a)(e,3),n=t[0],c=t[1],s=t[2];return n?Object(_.jsx)(k,{message:n.error_msg,reload:s}):null===c?Object(_.jsx)(Q.a,{}):Object(_.jsxs)(K.a,{size:"small",dataSource:c.list,rowKey:"idx",scroll:{x:"max-content"},children:[Object(_.jsx)(K.a.Column,{title:"\u63d0\u4ea4\u65f6\u95f4",dataIndex:"timestamp_s",render:function(e){return Object(m.e)(e)}}),Object(_.jsx)(K.a.Column,{title:"\u9898\u76ee",dataIndex:"challenge_title"}),Object(_.jsx)(K.a.Column,{title:"Flag",dataIndex:"matched_flag",render:function(e){return null===e?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(re,{status:"untouched"})," \u672a\u5339\u914d"]}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(re,{status:"passed"})," \u6210\u529f\u5339\u914d ",e]})}}),Object(_.jsx)(K.a.Column,{title:"\u5907\u6ce8",dataIndex:"overrides",render:function(e){return e.map((function(e,t){return Object(_.jsx)(V.a,{color:"red",children:e},t)}))}}),Object(_.jsx)(K.a.Column,{title:"\u83b7\u5f97\u5206\u6570",dataIndex:"gained_score"})]})}function pe(){return Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsx)("h1",{children:"\u63d0\u4ea4\u5386\u53f2\u8bb0\u5f55"}),Object(_.jsx)(fe,{})]})}var ge=n(274),ve=n(272),_e=n(127),ye=n(296),ke=n(297),we=n(298);n(254);function Ne(){var e=v("writeup"),t=Object(o.a)(e,3),n=t[0],s=t[1],r=t[2],a=Object(c.useState)(!1),l=Object(o.a)(a,2),j=l[0],u=l[1],d=Object(c.useState)(null),O=Object(o.a)(d,2),h=O[0],p=O[1],g=Object(c.useState)("Maybe"),y=Object(o.a)(g,2),w=y[0],N=y[1],I=Object(c.useState)("CC-BY-NC"),C=Object(o.a)(I,2),E=C[0],S=C[1];if(n)return Object(_.jsx)(k,{message:n.error_msg,reload:r});if(null===s)return Object(_.jsx)(Q.a,{});return Object(_.jsxs)("div",{children:[s.writeup_required?Object(_.jsx)(i.a,{showIcon:!0,type:"info",message:Object(_.jsxs)(_.Fragment,{children:["\u6309\u7167\u6bd4\u8d5b\u89c4\u5219\uff0c\u4f60 ",Object(_.jsx)("b",{children:"\u9700\u8981"})," \u5728\u622a\u6b62\u65f6\u95f4\u524d\u63d0\u4ea4 Writeup"]})}):Object(_.jsx)(i.a,{showIcon:!0,type:"info",message:Object(_.jsxs)(_.Fragment,{children:["\u6309\u7167\u6bd4\u8d5b\u89c4\u5219\uff0c\u4f60 ",Object(_.jsx)("b",{children:"\u4e0d\u9700\u8981"})," \u63d0\u4ea4 Writeup\uff0c\u4f46\u5728\u622a\u6b62\u65f6\u95f4\u524d\u53ef\u4ee5\u81ea\u613f\u63d0\u4ea4"]})}),Object(_.jsx)("br",{}),s.submitted_metadata?Object(_.jsx)(i.a,{showIcon:!0,type:"success",message:"\u5df2\u7ecf\u63d0\u4ea4\u4e86 Writeup",description:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("ul",{children:Object.keys(s.submitted_metadata).map((function(e){return Object(_.jsxs)("li",{children:[e,": ",s.submitted_metadata[e]]},e)}))}),Object(_.jsx)("p",{children:"\u5728\u622a\u6b62\u65f6\u95f4\u524d\uff0c\u4f60\u53ef\u4ee5\u63d0\u4ea4\u65b0\u7684 Writeup \u6765\u8986\u76d6\u4e0a\u8ff0\u5185\u5bb9"})]})}):Object(_.jsx)(i.a,{showIcon:!0,type:"info",message:"\u5c1a\u672a\u63d0\u4ea4 Writeup"}),Object(_.jsx)("br",{}),x.j,Object(_.jsx)("br",{}),Object(_.jsx)(U.a,{title:"\u63d0\u4ea4\u65b0\u7684 Writeup",size:"small",type:"inner",bordered:!1,children:Object(_.jsxs)(ge.a,{onFinish:function(){if(h){var e=new FormData;e.append("file",h),e.append("publish",w),e.append("rights",E),u(!0);var t=new XMLHttpRequest;t.open("PUT",x.i+"writeup"),t.setRequestHeader("X-Wish-Version",f),t.withCredentials=!0,t.responseType="json",t.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=(100*e.loaded/e.total).toFixed(1);T.b.loading({content:"\u6b63\u5728\u4e0a\u4f20\u2026\uff08".concat(t,"%\uff09"),key:"Writeup.Submit",duration:20})}})),t.addEventListener("loadend",(function(){4!==t.readyState?T.b.error({content:"\u7f51\u7edc\u9519\u8bef state=".concat(t.readyState),key:"Writeup.Submit",duration:3}):200!==t.status?T.b.error({content:"HTTP \u9519\u8bef ".concat(t.status),key:"Writeup.Submit",duration:3}):t.response.error?T.b.error({content:t.response.error_msg,key:"Writeup.Submit",duration:3}):(T.b.success({content:"\u63d0\u4ea4\u6210\u529f",key:"Writeup.Submit",duration:2}),p(null),r()),u(!1)})),t.send(e)}else T.b.error({content:"\u8bf7\u4e0a\u4f20 Writeup \u6587\u4ef6",key:"Writeup.Submit",duration:3})},colon:!1,labelCol:{span:4},labelWrap:!0,wrapperCol:{span:20},children:[Object(_.jsx)(ge.a.Item,{label:"\u4e0a\u4f20\u6587\u4ef6",children:Object(_.jsxs)(ve.a.Dragger,{fileList:[],beforeUpload:function(e){return e.size/1024/1024<s.max_size_mb?p(e):T.b.error({content:"\u6587\u4ef6\u8fc7\u5927\uff0c\u8bf7\u5220\u9664\u4e0d\u5fc5\u8981\u7684\u5185\u5bb9\u6216\u8005\u538b\u7f29\u56fe\u7247",key:"Writeup.File",duration:3}),!1},disabled:j,children:[Object(_.jsx)("p",{className:"ant-upload-drag-icon",children:h?Object(_.jsx)(ye.a,{}):Object(_.jsx)(ke.a,{})}),Object(_.jsx)("p",{className:"ant-upload-text",children:h?h.name:"\u9009\u62e9\u6587\u4ef6\u6216\u8005\u62d6\u62fd\u5230\u6b64\u5904"}),Object(_.jsx)("p",{className:"ant-upload-hint",children:h?Object(_.jsxs)(_.Fragment,{children:[(h.size/1024/1024).toFixed(2),"MB"]}):Object(_.jsxs)(_.Fragment,{children:["\u6587\u4ef6\u683c\u5f0f\uff1a\u5efa\u8bae\u4f7f\u7528 .md, .pdf, .pptx, .7z, .zip \u4e4b\u4e00",Object(_.jsx)("br",{}),"\u6587\u4ef6\u5927\u5c0f\uff1a\u4e0a\u9650 ",s.max_size_mb,"MB\uff0c\u4f46\u4e00\u4e2a\u6b63\u5e38\u7684 Writeup \u5e94\u5f53 ",Object(_.jsx)("b",{children:"\u8fdc\u5c0f\u4e8e"})," \u6b64\u5927\u5c0f"]})})]})}),Object(_.jsx)(ge.a.Item,{label:"\u662f\u5426\u516c\u5f00",help:"Always-Yes"===w?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("b",{children:"\u6b64 Writeup \u7684\u5185\u5bb9\u5c06\u5728\u8d5b\u540e\u516c\u5f00"}),"\uff0c\u7528\u4e8e\u5b66\u4e60\u4ea4\u6d41"]}):"Maybe"===w?Object(_.jsxs)(_.Fragment,{children:["\u8d5b\u540e\u5c06\u516c\u5f00\u4e00\u4e9b\u9ad8\u8d28\u91cf\u6216\u8005\u542b\u6709\u7279\u6b8a\u89e3\u6cd5\u7684\u9009\u624b Writeup \u7528\u4e8e\u5b66\u4e60\u4ea4\u6d41\uff0c",Object(_.jsx)("b",{children:"\u4f60\u5c06\u5141\u8bb8\u6211\u4eec\u914c\u60c5\u516c\u5f00\u6216\u8005\u4e0d\u516c\u5f00\u6b64 Writeup \u7684\u5185\u5bb9"})]}):"Always-No"===w?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("b",{children:"\u6b64 Writeup \u7684\u5185\u5bb9\u5c06\u4e0d\u4f1a\u88ab\u516c\u5f00\u7ed9\u5176\u4ed6\u9009\u624b"}),"\uff0c\u4f46\u547d\u9898\u4eba\u4f9d\u7136\u4f1a\u51fa\u4e8e\u53cd\u4f5c\u5f0a\u76ee\u7684\u68c0\u67e5\u6b64 Writeup"]}):Object(_.jsxs)(_.Fragment,{children:["(",w,")"]}),children:Object(_.jsxs)(_e.a.Group,{buttonStyle:"solid",value:w,onChange:function(e){return N(e.target.value)},disabled:j,children:[Object(_.jsx)(_e.a.Button,{value:"Always-Yes",children:"\u59cb\u7ec8\u516c\u5f00"}),Object(_.jsx)(_e.a.Button,{value:"Maybe",children:"\u53ef\u4ee5\u516c\u5f00\uff08\u9ed8\u8ba4\uff09"}),Object(_.jsx)(_e.a.Button,{value:"Always-No",children:"\u4e0d\u516c\u5f00"})]})}),Object(_.jsx)(ge.a.Item,{label:"\u6743\u5229",help:"All-Rights-Reserved"===E?Object(_.jsxs)(_.Fragment,{children:["\u9664\u975e\u4f60\u660e\u786e\u5141\u8bb8\uff0c\u8bfb\u8005 ",Object(_.jsx)("b",{children:"\u4e0d\u5f97\u8f6c\u8f7d\u6216\u6539\u7f16"})," \u6b64 Writeup \u7684\u5185\u5bb9"]}):"CC-BY-NC"===E?Object(_.jsxs)(_.Fragment,{children:["\u6b64 Writeup \u5c06\u6309\u7167 ",Object(_.jsx)(m.b,{href:"https://creativecommons.org/licenses/by-nc/4.0/",children:"CC BY-NC 4.0"})," ","\u534f\u8bae\u5141\u8bb8\u8bfb\u8005 ",Object(_.jsx)("b",{children:"\u5728\u6ce8\u660e\u51fa\u5904\u7684\u60c5\u51b5\u4e0b\u975e\u5546\u4e1a\u4f7f\u7528"})," \u5176\u4e2d\u7684\u5185\u5bb9"]}):"CC0"===E?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("b",{children:"\u4f60\u5c06\u653e\u5f03\u5bf9\u6b64 Writeup \u7684\u6240\u6709\u6743\u5229"}),"\uff0c \u6309\u7167 ",Object(_.jsx)(m.b,{href:"https://creativecommons.org/publicdomain/zero/1.0/",children:"CC0 1.0"})," ","\u534f\u8bae\u5141\u8bb8\u8bfb\u8005\u4efb\u610f\u4f7f\u7528\u5176\u4e2d\u7684\u5185\u5bb9"]}):Object(_.jsxs)(_.Fragment,{children:["(",E,")"]}),children:Object(_.jsxs)(_e.a.Group,{buttonStyle:"solid",value:E,onChange:function(e){return S(e.target.value)},disabled:j,children:[Object(_.jsx)(_e.a.Button,{value:"All-Rights-Reserved",children:"\u4fdd\u7559\u6240\u6709\u6743\u5229"}),Object(_.jsx)(_e.a.Button,{value:"CC-BY-NC",children:"\u5141\u8bb8\u975e\u5546\u4e1a\u4f7f\u7528"}),Object(_.jsx)(_e.a.Button,{value:"CC0",children:"\u5141\u8bb8\u4efb\u610f\u4f7f\u7528"})]})}),Object(_.jsxs)(b.a,{block:!0,type:"primary",size:"large",htmlType:"submit",disabled:j||null===h,children:[Object(_.jsx)(we.a,{})," \u63d0\u4ea4"]})]})})]})}function Ie(){return Object(_.jsxs)("div",{className:"slim-container writeup-container",children:[Object(_.jsx)("h1",{children:"\u63d0\u4ea4 Writeup"}),Object(_.jsx)(Ne,{})]})}var Ce=n(280),Te=n(158),Ee=n(66),Se=n(300),Fe=n(168),Re=n(301),Ae=n(302),We=n(303),Pe=n(167),Le=n(304),Me=n(306),He=n(307);n(255);function De(e){var t=e.name,n=e.children;return Object(_.jsx)("div",{className:"template template-".concat(t),dangerouslySetInnerHTML:{__html:n}})}function ze(e){var t=e.name,n=Object(c.useState)(null),s=Object(o.a)(n,2),r=s[0],a=s[1],i=Object(c.useState)(null),l=Object(o.a)(i,2),j=l[0],b=l[1],u=Object(c.useCallback)((function(){b(null),a(null),fetch(x.g+t+"?tabid="+p,{method:"GET",credentials:"include"}).then((function(e){return 200!==e.status?(a("HTTP \u9519\u8bef ".concat(e.status)),null):e.text()})).then((function(e){b(e)})).catch((function(e){a("\u7f51\u7edc\u9519\u8bef ".concat(e))}))}),[t]);return Object(c.useEffect)((function(){u()}),[u]),r?Object(_.jsx)(k,{message:r,reload:u}):null===j?Object(_.jsx)(Q.a,{}):Object(_.jsx)(De,{name:t,children:j})}n(256);function Ge(e){var t=e.announcement,n=e.extra;return Object(_.jsx)("div",{className:"announcement",children:Object(_.jsx)(U.a,{type:"inner",size:"small",bordered:!1,extra:n||null,title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(V.a,{style:{fontSize:"1em",fontWeight:"bold"},color:"blue",children:[Object(_.jsx)(E.a,{})," ",t.title]})," ","\u53d1\u5e03\u4e8e ",Object(_.jsx)(m.d,{ts:t.timestamp_s})]}),children:Object(_.jsx)(De,{name:"announcement",children:t.content})})})}function Be(){var e=v("announcements"),t=Object(o.a)(e,3),n=t[0],c=t[1],s=t[2];return n?Object(_.jsx)(k,{message:n.error_msg,reload:s}):null===c?Object(_.jsx)(Q.a,{}):Object(_.jsxs)("div",{className:"announcement-list",children:[c.list.map((function(e){return Object(_.jsx)(Ge,{announcement:e},e.id)})),0===c.list.length&&Object(_.jsx)(Ee.a,{image:Ee.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u516c\u544a"})]})}var Ue=n(299),Ye=n(157),Ke=n.n(Ye);n(258);function qe(){var e=M();return Object(_.jsxs)("div",{className:"token-widget",children:[Object(_.jsxs)(b.a,{onClick:function(){Ke()(e.user.token)&&T.b.success({content:"\u5df2\u590d\u5236",key:"TokenWidget",duration:2})},size:"small",children:[Object(_.jsx)(Ue.a,{})," \u590d\u5236\u4e2a\u4ebaToken"]}),Object(_.jsx)("span",{children:"\u90e8\u5206\u9898\u76ee\u9700\u8981\u8f93\u5165\u4e2a\u4eba Token \u6765\u9a8c\u8bc1\u8eab\u4efd\uff0c\u4e0e\u4ed6\u4eba\u5206\u4eab Token \u5c06\u89c6\u4e3a\u4f5c\u5f0a\u3002"})]})}var Ve=n(275);n(259);function Qe(e){var t=e.ch,n=v("get_touched_users/"+t.key),c=Object(o.a)(n,3),s=c[0],r=c[1],a=c[2];return s?Object(_.jsx)(k,{message:s.error_msg,reload:a}):null===r?Object(_.jsx)(Q.a,{}):Object(_.jsx)("div",{children:Object(_.jsxs)(K.a,{dataSource:r.list,size:"small",children:[Object(_.jsx)(K.a.Column,{title:"\u7528\u6237",render:function(e,t){return Object(_.jsxs)(_.Fragment,{children:[t.nickname," ",Object(_.jsx)($,{children:t.group_disp})]})},filters:[{text:"\u5317\u4eac\u5927\u5b66\u9009\u624b",value:"pku"},{text:"\u5176\u4ed6\u9009\u624b",value:"other"}],onFilter:function(e,t){return"pku"===e?"\u5317\u4eac\u5927\u5b66"===t.group_disp:"other"!==e||"\u5317\u4eac\u5927\u5b66"!==t.group_disp},filterMultiple:!1},"user"),t.flags.map((function(e,t){return Object(_.jsx)(K.a.Column,{title:e.name||"\u901a\u8fc7\u65f6\u95f4",dataIndex:["flags",t],render:function(e){return e?Object(m.e)(e):""}},t)}))]})})}function Je(e){var t=e.ch,n=e.children,s=Object(c.useState)(!1),r=Object(o.a)(s,2),a=r[0],i=r[1];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("a",{onClick:function(){return i(!0)},children:n}),Object(_.jsx)(Ve.a,{visible:a,title:"".concat(t.title," \u7684\u901a\u8fc7\u60c5\u51b5"),footer:null,destroyOnClose:!0,onCancel:function(){return i(!1)},width:600,className:"touched-users-modal",children:Object(_.jsx)(Qe,{ch:t})})]})}n(260);function Xe(e){var t=e.action,n=e.ch,c=M();return"webpage"===t.type?Object(_.jsxs)(_.Fragment,{children:["\u4f60\u53ef\u4ee5 ",Object(_.jsxs)("a",{href:t.url.replace(/\{\{token}}/g,c.user.token),target:"_blank",children:["\u8bbf\u95ee",t.name]})]}):"webdocker"===t.type?Object(_.jsxs)(_.Fragment,{children:["\u4f60\u53ef\u4ee5 ",Object(_.jsxs)("a",{href:"https://".concat(t.host,"/docker-manager/start?").concat(c.user.token),target:"_blank",children:["\u8bbf\u95ee",t.name]})," ",Object(_.jsx)(Ce.a,{trigger:"click",content:Object(_.jsxs)("div",{children:[Object(_.jsxs)("p",{children:["\u672c\u9898\u4e3a\u6bcf\u540d\u9009\u624b\u5206\u914d\u4e00\u4e2a\u72ec\u7acb\u7684\u540e\u7aef\u73af\u5883\uff0c\u53c2\u89c1 ",Object(_.jsx)("a",{href:"#/info/faq",children:"FAQ\uff1a\u5173\u4e8e Web \u9898\u76ee\u73af\u5883"})]}),Object(_.jsx)("p",{children:"\u5982\u679c\u9898\u76ee\u51fa\u73b0\u95ee\u9898\u53ef\u4ee5\u624b\u52a8\u5173\u95ed\u73af\u5883\uff0c\u4e0b\u6b21\u8bbf\u95ee\u65f6\u5c06\u542f\u52a8\u65b0\u7684\u73af\u5883"}),Object(_.jsx)(b.a,{block:!0,danger:!0,onClick:function(){window.open("https://".concat(t.host,"/docker-manager/stop?").concat(c.user.token))},children:"\u5173\u95ed\u73af\u5883"})]}),children:Object(_.jsxs)(b.a,{size:"small",style:{marginLeft:".5em"},children:[Object(_.jsx)(Se.a,{}),"\u73af\u5883\u63a7\u5236"]})})]}):"terminal"===t.type?Object(_.jsxs)(_.Fragment,{children:["\u4f60\u53ef\u4ee5 ",Object(_.jsx)("a",{href:Object(x.h)(t,c.user.token),target:"_blank",children:"\u6253\u5f00\u7f51\u9875\u7ec8\u7aef"})," \u6216\u8005\u901a\u8fc7\u547d\u4ee4"," ",Object(_.jsxs)("code",{children:["nc ",t.host," ",t.port]})," \u8fde\u63a5\u5230",t.name]}):"attachment"===t.type?Object(_.jsxs)(_.Fragment,{children:["\u4f60\u53ef\u4ee5 ",Object(_.jsxs)("a",{href:"".concat(x.a).concat(n.key,"/").concat(t.filename),target:"_blank",children:["\u4e0b\u8f7d",t.name]})]}):void 0}function Ze(e){var t=e.do_reload_list,n=e.ch,s=Object(c.useState)(!1),r=Object(o.a)(s,2),a=r[0],i=r[1];return Object(_.jsx)("div",{children:Object(_.jsx)(Te.a.Search,{size:"large",addonBefore:n.flags.length>1?Object(_.jsxs)(q.a,{title:"\u6b64\u9898\u6709 ".concat(n.flags.length," \u4e2a Flag\uff0c\u7cfb\u7edf\u4f1a\u8bc6\u522b\u4f60\u63d0\u4ea4\u7684\u662f\u54ea\u4e00\u4e2a"),children:["\u63d0\u4ea4\u4efb\u610f Flag\uff1a",Object(_.jsx)(Fe.a,{})]}):"\u63d0\u4ea4 Flag\uff1a",placeholder:"flag{...}",enterButton:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Re.a,{})," \u63d0\u4ea4"]}),onSearch:function(e){e&&(T.b.loading({content:"\u6b63\u5728\u63d0\u4ea4\u2026",key:"FlagInput",duration:10}),i(!0),g("submit_flag",{challenge_key:n.key,flag:e}).then((function(e){i(!1),e.error?T.b.error({content:e.error_msg,key:"FlagInput",duration:3}):(T.b.success({content:"\u63d0\u4ea4\u6210\u529f",key:"FlagInput",duration:2}),t())})))},loading:a})})}function $e(e){var t=e.ch,n=v("challenge/"+t.key),c=Object(o.a)(n,3),s=c[0],r=c[1],a=c[2];return s?Object(_.jsx)(k,{message:s.error_msg,reload:a}):null===r?Object(_.jsx)(Q.a,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(De,{name:"challenge-desc",children:r.desc}),Object(_.jsx)("br",{}),r.actions.map((function(e,n){return Object(_.jsxs)("p",{className:"challenge-action",children:[Object(_.jsx)(Ae.a,{})," ",Object(_.jsx)(Xe,{ch:t,action:e})]},n)}))]})}function et(e){var t=e.base,n=e.cur;if(t===n)return null;var c=100*(1-n/t);return Object(_.jsxs)("span",{className:"item-discount",title:"\u57fa\u7840\u5206\u503c\uff1a"+t,children:["(-",c.toFixed(0),"%)"]})}function tt(e){var t=e.ch,n=e.do_reload_list;return Object(_.jsxs)("div",{className:"challenge-body",children:[Object(_.jsx)("h1",{children:t.title}),Object(_.jsxs)("p",{className:"challenge-stat",children:[Object(_.jsxs)(V.a,{color:"default",children:["\u57fa\u7840\u5206\u503c ",t.tot_base_score]}),Object(_.jsx)(V.a,{color:"default",children:Object(_.jsxs)(Je,{ch:t,children:[Object(_.jsx)(Ae.a,{})," ","\u5171 ",t.passed_users_count," \u4eba\u901a\u8fc7",t.touched_users_count>t.passed_users_count&&Object(_.jsxs)(_.Fragment,{children:["\uff08",t.touched_users_count," \u4eba\u90e8\u5206\u901a\u8fc7\uff09"]})]})}),!!t.metadata.author&&Object(_.jsxs)(V.a,{color:"default",children:["\u547d\u9898\u4eba\uff1a",t.metadata.author]}),!!t.metadata.first_blood_award_eligible&&Object(_.jsx)(V.a,{color:"default",children:Object(_.jsx)("a",{href:"#/board/first_pku",children:Object(_.jsxs)("b",{children:[Object(_.jsx)(J.a,{})," \u89e3\u9898\u5148\u950b\u5956"]})})})]}),Object(_.jsx)("br",{}),Object(_.jsx)($e,{ch:t}),"passed"===t.status?Object(_.jsx)(i.a,{type:"success",showIcon:!0,message:"\u4f60\u5df2\u7ecf\u901a\u8fc7\u6b64\u9898"}):Object(_.jsx)(Ze,{do_reload_list:n,ch:t}),Object(_.jsx)("br",{}),Object(_.jsx)(qe,{})]})}function nt(e){var t=e.info,n=Object(H.g)();return Object(_.jsxs)("div",{className:"portal-user-info",onClick:function(){return n("/board/"+t.active_board_key)},children:[Object(_.jsx)("div",{className:"portal-user-info-status",children:t.status_line}),null!==t.tot_score_by_cat&&Object(_.jsxs)("div",{className:"portal-user-info-cat",children:[Object(_.jsx)(We.a,{})," ",t.tot_score_by_cat.map((function(e,t){return Object(_.jsxs)(c.Fragment,{children:[0!==t?" + ":null,e[0]," ",e[1]]},e)}))]})]})}function ct(e){var t=e.list,n=e.active_key,s=Object(H.g)();return Object(_.jsx)("div",{className:"portal-chall-list",children:null===t?Object(_.jsx)(i.a,{showIcon:!0,type:"info",message:"\u73b0\u5728\u4e0d\u5141\u8bb8\u67e5\u770b\u9898\u76ee"}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"portal-chall-row portal-chall-header",children:[Object(_.jsx)("div",{className:"portal-chall-col-title",children:"\u9898\u76ee\u540d\u79f0"}),Object(_.jsx)("div",{className:"portal-chall-col-score",children:"\u5206\u503c"})]}),t.map((function(e){return Object(_.jsxs)(c.Fragment,{children:[Object(_.jsxs)("div",{className:"portal-chall-row".concat(n===e.key?" portal-chall-row-active":""),onClick:function(){return s("/game/"+e.key)},children:[Object(_.jsxs)("div",{className:"portal-chall-col-title",children:[Object(_.jsx)("span",{className:"portal-chall-category-badge",children:Object(_.jsx)(V.a,{color:e.category_color,children:e.category})}),Object(_.jsx)(se,{status:e.status})," ",e.title,e.flags.length>1&&Object(_.jsx)("span",{className:"portal-chall-caret",children:Object(_.jsx)(Pe.a,{})})]}),Object(_.jsxs)("div",{className:"portal-chall-col-score",children:[e.tot_cur_score,Object(_.jsx)("span",{className:"label-for-score",children:"\u5206"})," ",Object(_.jsx)(et,{base:e.tot_base_score,cur:e.tot_cur_score})]})]}),n===e.key&&e.flags.length>1&&e.flags.map((function(e,t){return Object(_.jsxs)("div",{className:"portal-chall-row portal-chall-row-active portal-chall-row-flag",children:[Object(_.jsxs)("div",{className:"portal-chall-col-title",children:[Object(_.jsx)(re,{status:e.status})," ",e.name]}),Object(_.jsxs)("div",{className:"portal-chall-col-score",children:[e.cur_score,Object(_.jsx)("span",{className:"label-for-score",children:"\u5206"})," ",Object(_.jsx)(et,{base:e.base_score,cur:e.cur_score})]})]},t)}))]},e.key)})),0===t.length&&Object(_.jsx)(Ee.a,{image:Ee.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u9898\u76ee"})]})})}function st(){var e=v("game"),t=Object(o.a)(e,3),n=t[0],s=t[1],r=t[2],a=Object(H.g)(),i=Object(m.h)(3),l=Object(o.a)(i,3),u=l[0],d=l[1],O=l[2],h=Object(H.h)(),x=void 0===h.challenge?null:h.challenge,f=Object(c.useMemo)((function(){if(null!==s&&null!==s.challenge_list){var e,t=Object(j.a)(s.challenge_list);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.key===x)return n}}catch(c){t.e(c)}finally{t.f()}}return null}),[s,x]);return Object(c.useEffect)((function(){window._anticheat_report&&window._anticheat_report()}),[]),n?("SHOULD_AGREE_TERMS"===n.error&&(T.b.info({content:n.error_msg,key:"Portal.Error",duration:2}),a("/user/terms")),"SHOULD_UPDATE_PROFILE"===n.error&&(T.b.info({content:n.error_msg,key:"Portal.Error",duration:2}),a("/user/profile")),Object(_.jsx)("div",{className:"slim-container",children:Object(_.jsx)(k,{message:n.error_msg,reload:function(){d(),r()}})})):Object(_.jsxs)("div",{className:"portal-container",children:[Object(_.jsxs)("div",{className:"portal-sidebar",children:[Object(_.jsxs)("div",{className:"portal-headline",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)(X.a,{})," ",0!==u&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(m.d,{ts:u}),"\u66f4\u65b0"]})]}),Object(_.jsx)("div",{children:Object(_.jsxs)(b.a,{type:"link",ref:O,onClick:function(){T.b.success({content:"\u5df2\u5237\u65b0\u9898\u76ee\u6570\u636e",key:"Portal.ManualLoadData",duration:2}),d(),r()},children:[Object(_.jsx)(Z.a,{})," \u5237\u65b0\u9898\u76ee"]})})]}),null===s?Object(_.jsx)(Q.a,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"portal-primary-btn",children:s.show_writeup?Object(_.jsxs)(b.a,{block:!0,size:"large",onClick:function(){return a("/writeup")},type:"primary",children:[Object(_.jsx)(Le.a,{})," \u63d0\u4ea4 Writeup"]}):Object(_.jsxs)(b.a,{block:!0,size:"large",onClick:function(){return a("/info/faq")},children:[Object(_.jsx)(z.a,{})," \u9009\u624b\u5e38\u89c1\u95ee\u9898"]})}),Object(_.jsx)(nt,{info:s.user_info}),Object(_.jsx)(ct,{list:s.challenge_list,active_key:x})]})]}),Object(_.jsxs)("div",{className:"portal-main",children:[Object(_.jsxs)("div",{className:"portal-headline",children:[null!==s&&Object(_.jsxs)("div",{children:[Object(_.jsx)(S.a,{})," ",s.trigger.current_name.replace(/;/,"\uff0c"),!!s.trigger.next_name&&Object(_.jsxs)(_.Fragment,{children:["\uff08",Object(_.jsx)(m.d,{ts:s.trigger.next_timestamp_s,delta:5}),"\uff1a",s.trigger.next_name.replace(/;/,"\uff0c"),"\uff09"]})]}),Object(_.jsx)("div",{children:Object(_.jsxs)(b.a,{type:"link",onClick:function(){window.location.href="#/info/triggers"},children:[Object(_.jsx)(Ae.a,{})," \u67e5\u770b\u8d5b\u7a0b\u5b89\u6392"]})})]}),null!==s&&null!==s.last_announcement&&Object(_.jsx)(Ge,{announcement:s.last_announcement,extra:Object(_.jsxs)("a",{href:"#/info/announcements",children:[Object(_.jsx)(Ae.a,{})," \u67e5\u770b\u6240\u6709\u516c\u544a"]})}),null!==f?Object(_.jsx)(tt,{ch:f,do_reload_list:r}):null!==x&&null!==s?Object(_.jsx)(m.c,{}):Object(_.jsx)(ze,{name:"game"})]})]})}function rt(){return M().feature.game?Object(_.jsx)(st,{}):Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsx)(ze,{name:"game"}),Object(_.jsx)("br",{}),Object(_.jsx)("div",{className:"landing-login-form",children:Object(_.jsxs)(U.a,{type:"inner",size:"small",bordered:!1,children:[Object(_.jsx)("b",{children:"\u62a5\u540d\u53c2\u8d5b\uff1a"}),Object(_.jsxs)(b.a,{type:"primary",onClick:function(){return Object(m.g)("pku/redirect")},children:[Object(_.jsx)(Me.a,{})," \u5317\u4eac\u5927\u5b66\u767b\u5f55"]})," ",Object(_.jsxs)(b.a,{onClick:function(){return window.location.href="#/login/other"},children:[Object(_.jsx)(He.a,{})," \u6821\u5916\u9009\u624b"]})]})})]})}var at=n(277),it=n(308);n(261);function lt(e){var t=e.status,n=e.children;return Object(_.jsx)("span",{className:"trigger-status-".concat(t),children:n})}function ot(e){var t=e.children.split(";");return Object(_.jsx)("div",{className:"trigger-fragments",children:t.map((function(e,t){return Object(_.jsx)("p",{children:e},t)}))})}function jt(){var e=v("triggers"),t=Object(o.a)(e,3),n=t[0],c=t[1],s=t[2];return n?Object(_.jsx)(k,{message:n.error_msg,reload:s}):null===c?Object(_.jsx)(Q.a,{}):Object(_.jsxs)("div",{children:[Object(_.jsx)("br",{}),Object(_.jsx)(at.a,{mode:"left",children:c.list.map((function(e){return Object(_.jsx)(at.a.Item,{label:Object(_.jsx)(lt,{status:e.status,children:0===e.timestamp_s?"--":Object(m.e)(e.timestamp_s)}),color:{pst:"gray",prs:"blue",ftr:"black"}[e.status],dot:{pst:null,prs:Object(_.jsx)(it.a,{}),ftr:null}[e.status],children:Object(_.jsx)(lt,{status:e.status,children:Object(_.jsx)(ot,{children:e.name})})},e.timestamp_s)}))}),0===c.list.length&&Object(_.jsx)(Ee.a,{image:Ee.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u8d5b\u7a0b"})]})}var bt=n(89);n(262);function ut(){var e=Object(c.useContext)(P),t=e.info,n=e.reload_info,s=Object(c.useState)(!1),r=Object(o.a)(s,2),a=r[0],l=r[1],j=Object(c.useRef)(null),u=Object(H.g)();if(!t.user)return Object(_.jsx)(i.a,{type:"error",showIcon:!0,message:"\u672a\u767b\u5f55",description:"\u8bf7\u767b\u5f55\u540e\u4fee\u6539\u4e2a\u4eba\u8d44\u6599"});var d={colon:!1,initialValues:t.user.profile,labelCol:{span:6},labelWrap:!0,wrapperCol:{span:13},onValuesChange:function(){l(!0)}},O={size:"small",type:"inner",bordered:!1},h={onPressEnter:function(){j.current&&j.current.click()}};return Object(_.jsxs)(ge.a.Provider,{onFormFinish:function(e,t){var c=t.forms;if("submit"===e&&a){var s={};Object.values(c).forEach((function(e){Object.assign(s,e.getFieldsValue())})),T.b.loading({content:"\u6b63\u5728\u4fdd\u5b58\u2026",key:"UserProfile",duration:10}),g("update_profile",{profile:s}).then((function(e){e.error?(T.b.error({content:e.error_msg,key:"UserProfile",duration:3}),"SHOULD_AGREE_TERMS"===e.error&&u("/user/terms")):(T.b.success({content:"\u4fdd\u5b58\u6210\u529f",key:"UserProfile",duration:2}),n(),u("/"))}))}},children:[Object(_.jsxs)(U.a,Object(w.a)(Object(w.a)({title:"\u516c\u5f00\u8d44\u6599"},O),{},{children:[Object(_.jsxs)(ge.a,Object(w.a)(Object(w.a)({name:"public"},d),{},{children:[void 0!==t.user.profile.nickname&&Object(_.jsx)(ge.a.Item,{name:"nickname",label:"\u6635\u79f0",extra:"\u5982\u5305\u542b\u4e0d\u9002\u5b9c\u5185\u5bb9\u53ef\u80fd\u4f1a\u88ab\u5f3a\u5236\u4fee\u6539\u3001\u5c01\u7981\u8d26\u53f7\u6216\u8ffd\u7a76\u8d23\u4efb",children:Object(_.jsx)(Te.a,Object(w.a)({maxLength:20,showCount:!0,placeholder:"\uff08\u5c06\u663e\u793a\u5728\u6392\u884c\u699c\u4e0a\uff09"},h))}),void 0!==t.user.profile.gender&&Object(_.jsx)(ge.a.Item,{name:"gender",label:"\u6027\u522b",extra:"\u7528\u4e8e\u786e\u8ba4\u5973\u751f\u7279\u522b\u5956\u8d44\u683c\uff0c\u8bf7\u5982\u5b9e\u9009\u62e9\uff0c\u9009\u62e9\u540e\u65e0\u6cd5\u4fee\u6539",children:Object(_.jsxs)(_e.a.Group,{buttonStyle:"solid",children:[Object(_.jsx)(_e.a.Button,{value:"male",children:"\u7537"}),Object(_.jsx)(_e.a.Button,{value:"female",children:"\u5973"}),Object(_.jsx)(_e.a.Button,{value:"other",children:"\u5176\u4ed6"})]})}),Object(_.jsxs)(ge.a.Item,{label:"\u7528\u6237\u7ec4",children:[Object(_.jsx)($,{children:t.user.group_disp}),Object(_.jsx)(oe,{badges:t.user.badges})]})]})),"banned"===t.user.group&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("br",{}),Object(_.jsx)(i.a,{type:"error",showIcon:!0,message:"\u7531\u4e8e\u8fdd\u53cd\u89c4\u5219\uff0c\u4f60\u7684\u53c2\u8d5b\u8d44\u683c\u5df2\u88ab\u53d6\u6d88\u3002\u5982\u6709\u7591\u95ee\u8bf7\u8054\u7cfb\u5de5\u4f5c\u4eba\u5458\u3002"})]}),"other"===t.user.group&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("br",{}),Object(_.jsx)(i.a,{type:"info",showIcon:!0,message:"\u4f60\u7684\u8eab\u4efd\u4e0d\u662f\u5317\u4eac\u5927\u5b66\u5728\u6821\u5b66\u751f\uff0c\u5c06\u4e0d\u53c2\u4e0e\u8bc4\u5956\u3002\u5982\u6709\u7591\u95ee\u8bf7\u8054\u7cfb\u5de5\u4f5c\u4eba\u5458\u3002"})]})]})),Object(_.jsx)("br",{}),Object(_.jsxs)(U.a,Object(w.a)(Object(w.a)({title:"\u8054\u7cfb\u65b9\u5f0f"},O),{},{children:[Object(_.jsxs)(ge.a,Object(w.a)(Object(w.a)({name:"contact"},d),{},{children:[void 0!==t.user.profile.tel&&Object(_.jsx)(ge.a.Item,{name:"tel",label:"\u7535\u8bdd\u53f7\u7801",children:Object(_.jsx)(Te.a,Object(w.a)({maxLength:20},h))}),void 0!==t.user.profile.email&&Object(_.jsx)(ge.a.Item,{name:"email",label:"\u90ae\u7bb1",children:Object(_.jsx)(Te.a,Object(w.a)({},h))}),void 0!==t.user.profile.qq&&Object(_.jsx)(ge.a.Item,{name:"qq",label:"QQ\u53f7",children:Object(_.jsx)(Te.a,Object(w.a)({maxLength:50},h))})]})),"pku"===t.user.group&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("br",{}),Object(_.jsx)(i.a,{type:"info",showIcon:!0,message:"\u8bf7\u6b63\u786e\u586b\u5199\u4ee5\u4fbf\u8d5b\u540e\u8054\u7cfb\u548c\u9881\u5956\uff0c\u540c\u65f6\u8bf7\u52a0\u5165\u9009\u624b QQ \u7fa4 691076890"})]})]})),Object(_.jsx)("br",{}),Object(_.jsx)(U.a,Object(w.a)(Object(w.a)({title:"\u5176\u4ed6\u4fe1\u606f"},O),{},{children:Object(_.jsx)(ge.a,Object(w.a)(Object(w.a)({name:"other"},d),{},{children:void 0!==t.user.profile.comment&&Object(_.jsx)(ge.a.Item,{name:"comment",label:"\u4e86\u89e3\u6bd4\u8d5b\u7684\u6e20\u9053",children:Object(_.jsx)(Te.a,Object(w.a)({maxLength:100,placeholder:"\uff08\u53ef\u4e0d\u586b\uff09"},h))})}))})),Object(_.jsx)("br",{}),Object(_.jsx)(ge.a,{name:"submit",children:Object(_.jsxs)(b.a,{type:"primary",size:"large",block:!0,htmlType:"submit",disabled:!a,ref:j,children:[Object(_.jsx)(bt.a,{})," \u4fdd\u5b58"]})})]})}function dt(){return Object(_.jsxs)("div",{className:"slim-container user-profile-container",children:[Object(_.jsx)("h1",{children:"\u4e2a\u4eba\u8d44\u6599"}),Object(_.jsx)(ut,{})]})}function Ot(){var e=Object(c.useContext)(P),t=e.info,n=e.reload_info,s=Object(H.g)();return Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsx)("h1",{children:"\u53c2\u8d5b\u987b\u77e5"}),Object(_.jsx)(ze,{name:"terms"}),Object(_.jsx)("br",{}),null!==t.user&&(t.user.terms_agreed?Object(_.jsxs)(b.a,{type:"primary",size:"large",block:!0,disabled:!0,children:[Object(_.jsx)(bt.a,{})," \u5df2\u540c\u610f\u53c2\u8d5b\u987b\u77e5"]}):Object(_.jsxs)(b.a,{type:"primary",size:"large",block:!0,onClick:function(){T.b.loading({content:"\u6b63\u5728\u4fdd\u5b58\u2026",key:"Terms",duration:10}),window._anticheat_report&&window._anticheat_report(),g("agree_term",{}).then((function(e){e.error?T.b.error({content:e.error_msg,key:"Terms",duration:3}):(T.b.success({content:"\u4fdd\u5b58\u6210\u529f",key:"Terms",duration:2}),n(),s("/"))}))},children:[Object(_.jsx)(bt.a,{})," \u6211\u7406\u89e3\u5e76\u540c\u610f\u53c2\u8d5b\u987b\u77e5"]}))]})}var ht=n(309),xt=n(310);n(263);function mt(){return Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsx)(i.a,{showIcon:!0,message:Object(_.jsx)("b",{children:"\u6821\u5916\u9009\u624b\u6ce8\u610f\u4e8b\u9879"}),description:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("p",{children:"\u6211\u4eec\u5141\u8bb8\u6821\u5916\u9009\u624b\u901a\u8fc7 OAuth \u767b\u5f55\u4e00\u540c\u53c2\u4e0e\u6bd4\u8d5b\u3002 \u6821\u5916\u9009\u624b\u5c06\u4e0d\u53c2\u4e0e\u8bc4\u5956\uff0c\u4f46\u53ef\u4ee5\u6b63\u5e38\u67e5\u770b\u9898\u76ee\u5e76\u63d0\u4ea4\u7b54\u6848\u3002\u5c06\u6309\u4e0e\u6821\u5185\u9009\u624b\u76f8\u540c\u7684\u6807\u51c6\u8ba1\u5206\uff0c\u663e\u793a\u5728\u603b\u6392\u884c\u699c\u4e0a\u3002"}),Object(_.jsx)("p",{children:"\u6821\u5916\u9009\u624b\u7b54\u9898\u5c06\u4e0d\u5f71\u54cd\u52a8\u6001\u5206\u503c\u673a\u5236\uff0c\u5373\u9898\u76ee\u5206\u6570\u53ea\u53d7\u6821\u5185\u89e3\u51fa\u4eba\u6570\u5f71\u54cd\u3002"}),Object(_.jsxs)("p",{children:["\u6821\u5916\u9009\u624b\u540c\u6837\u9700\u8981\u9075\u5b88 ",Object(_.jsx)("a",{href:"#/user/terms",children:"\u8bda\u4fe1\u6bd4\u8d5b\u987b\u77e5"}),"\uff0c\u5728\u6bd4\u8d5b\u7ed3\u675f\u524d\u4e0d\u5f97\u516c\u5e03\u89e3\u6cd5\u6216\u63d0\u793a\uff0c\u4e0d\u5f97\u4ee3\u6253\u6216\u4e0e\u4ed6\u4eba\u5408\u4f5c\u3002"]}),Object(_.jsx)("p",{children:"\u5728\u89e3\u9898\u65f6\u8bf7\u9075\u5b88\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u4ec5\u53ef\u653b\u51fb\u9898\u76ee\u6307\u5b9a\u7684\u4e3b\u673a\u3002 \u5982\u679c\u9009\u624b\u5728\u89e3\u9898\u65f6\u975e\u6cd5\u8bbf\u95ee\u6216\u7834\u574f\u4e86\u5176\u4ed6\u65e0\u5173\u7cfb\u7edf\uff0c\u5c06\u627f\u62c5\u76f8\u5e94\u7684\u6cd5\u5f8b\u8d23\u4efb\u3002"})]})}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"login-instruction",children:[Object(_.jsx)("p",{children:Object(_.jsx)("b",{children:"\u9009\u62e9\u767b\u5f55\u65b9\u5f0f"})}),Object(_.jsxs)("p",{children:[Object(_.jsxs)(b.a,{size:"large",onClick:function(){return Object(m.g)("github/login")},children:[Object(_.jsx)(ht.a,{})," GitHub"]}),"\u2003",Object(_.jsxs)(b.a,{size:"large",onClick:function(){return Object(m.g)("microsoft/login")},children:[Object(_.jsx)(xt.a,{})," Microsoft"]})]}),Object(_.jsx)("br",{}),Object(_.jsx)("hr",{}),Object(_.jsx)("br",{}),Object(_.jsx)("p",{className:"login-pku-warning",children:Object(_.jsx)("b",{children:"\u5317\u4eac\u5927\u5b66\u6821\u5185\u9009\u624b\u6ce8\u610f"})}),Object(_.jsx)("p",{children:"\u672c\u7ade\u8d5b\u4e0d\u5141\u8bb8\u9009\u624b\u6ce8\u518c\u591a\u4e2a\u8d26\u53f7\uff0c\u6821\u5185\u9009\u624b\u52a1\u5fc5\u5168\u7a0b\u901a\u8fc7\u5317\u4eac\u5927\u5b66\u7edf\u4e00\u8eab\u4efd\u8ba4\u8bc1\uff08IAAA\uff09\u7cfb\u7edf\u767b\u5f55\uff0c\u5426\u5219\u89c6\u4e3a\u653e\u5f03\u8bc4\u5956\u8d44\u683c\u3002"}),Object(_.jsx)("p",{children:Object(_.jsxs)(b.a,{size:"large",onClick:function(){return Object(m.g)("pku/redirect")},children:[Object(_.jsx)(Me.a,{})," \u5317\u4eac\u5927\u5b66\u767b\u5f55"]})})]})]})}var ft=n(311),pt=n(312),gt=n(313),vt=n(314),_t=n(315),yt=n(316),kt=n(317);n(264);function wt(){var e=M(),t=Object(H.f)(),n=Object(H.g)(),c=t.pathname.startsWith("/user/")?t.pathname:"/"+t.pathname.substring(1).split("/")[0];return Object(_.jsx)("div",{className:"header-container",children:Object(_.jsxs)("div",{className:"header",children:[Object(_.jsx)("div",{className:"header-logo",children:Object(_.jsxs)("span",{className:"clickable",onClick:function(){return n("/")},children:["/license"===c?Object(_.jsx)("img",{src:"you-sticker.png",alt:"",title:"\u30d2\u30c8\u30ea\u30c0\u30b1\u30ca\u30f3\u30c6\u30a8\u30e9\u30d9\u30a4\u30ca\u30a4\u30e8",className:"game-logo",style:{backgroundColor:"#bdb"}}):x.d,x.e]})}),Object(_.jsx)("div",{className:"header-nav",children:Object(_.jsxs)(D.a,{mode:"horizontal",theme:"dark",selectedKeys:[c],onSelect:function(e){"_"!==e.key.charAt(0)&&n(e.key)},children:[!!e.feature.game&&Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(ft.a,{})," \u6bd4\u8d5b\u4e3b\u9875"]},"/game"),Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(pt.a,{})," \u6392\u884c\u699c"]},"/board"),Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(E.a,{})," \u4fe1\u606f"]},"/info"),e.user?Object(_.jsxs)(D.a.SubMenu,{popupOffset:[-6,2],title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{children:Object(_.jsx)(gt.a,{})})," ",Object(_.jsx)(m.a,{text:e.user.profile.nickname||"\u8d26\u6237",width:110}),Object(_.jsx)("span",{className:"header-nav-caret",children:Object(_.jsx)(Pe.a,{})})]}),popupClassName:"header-nav-popup",children:[Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(vt.a,{})," \u4e2a\u4eba\u8d44\u6599"]},"/user/profile"),Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(X.a,{})," \u63d0\u4ea4\u5386\u53f2\u8bb0\u5f55"]},"/user/submissions"),Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(_t.a,{})," \u53c2\u8d5b\u987b\u77e5"]},"/user/terms"),Object(_.jsxs)(D.a.Item,{danger:!0,onClick:function(){return Object(m.g)("logout")},children:[Object(_.jsx)(yt.a,{})," \u6ce8\u9500"]},"_/user/logout")]},"_/user"):Object(_.jsxs)(D.a.SubMenu,{popupOffset:[-6,2],title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(kt.a,{})," \u53c2\u8d5b",Object(_.jsx)("span",{className:"header-nav-caret",children:Object(_.jsx)(Pe.a,{})})]}),className:"header-nav-login",popupClassName:"header-nav-popup",children:[Object(_.jsxs)(D.a.Item,{onClick:function(){return Object(m.g)("pku/redirect")},children:[Object(_.jsx)(Me.a,{})," \u5317\u4eac\u5927\u5b66\u767b\u5f55"]},"_/login/pku"),Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(He.a,{})," \u6821\u5916\u9009\u624b"]},"/login/other")]},"_/login")]})})]})})}n(265);function Nt(){return Object(_.jsx)("div",{className:"footer",children:Object(_.jsxs)("p",{children:["Project ",Object(_.jsx)("b",{children:"Guiding Star"})," by PKUGGG Team"," (2211261116)",Object(_.jsx)("br",{}),Object(_.jsxs)("a",{href:"#/license",children:[Object(_.jsx)(ht.a,{})," \u5f00\u653e\u6e90\u4ee3\u7801"]})]})})}n(266);function It(){var e=Object(H.h)().page,t=Object(H.g)(),n=M();return Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsxs)(D.a,{className:"router-menu",selectedKeys:[e],onSelect:function(e){t("/info/".concat(e.key))},mode:"horizontal",children:[Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(E.a,{})," \u6bd4\u8d5b\u516c\u544a"]},"announcements"),Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(S.a,{})," \u8d5b\u7a0b\u5b89\u6392"]},"triggers"),n.feature.templates.map((function(e){var t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(z.a,{})," ",c]},n)}))]}),Object(_.jsx)("br",{}),"announcements"===e?Object(_.jsx)(Be,{}):"triggers"===e?Object(_.jsx)(jt,{}):Object(_.jsx)(ze,{name:e})]})}function Ct(){var e=Object(H.h)().name,t=Object(H.g)();return Object(_.jsxs)("div",{children:[Object(_.jsxs)(D.a,{className:"router-menu",selectedKeys:[e],onSelect:function(e){t("/board/".concat(e.key))},mode:"horizontal",children:[Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(G.a,{})," \u5317\u4eac\u5927\u5b66\u6392\u540d"]},"score_pku"),Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(B.a,{})," \u5317\u4eac\u5927\u5b66\u4e00\u8840\u699c"]},"first_pku"),Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(G.a,{})," \u603b\u6392\u540d"]},"score_all"),Object(_.jsxs)(D.a.Item,{children:[Object(_.jsx)(B.a,{})," \u603b\u4e00\u8840\u699c"]},"first_all")]}),Object(_.jsx)(me,{name:e},e)]})}function Tt(){var e=M();return Object(c.useEffect)((function(){function t(){fetch("".concat(x.f,"event?name=focus&tabid=").concat(p),{method:"POST",credentials:"include"})}function n(){fetch("".concat(x.f,"event?name=blur&tabid=").concat(p),{method:"POST",credentials:"include"})}if(e.user&&e.user.terms_agreed)return window.addEventListener("focus",t),window.addEventListener("blur",n),function(){window.removeEventListener("focus",t),window.removeEventListener("blur",n)}}),[e.user]),null}function Et(){return Object(_.jsxs)("div",{children:[Object(_.jsx)(Tt,{}),Object(_.jsx)(wt,{}),Object(_.jsx)("div",{className:"main-container",children:Object(_.jsx)(i.a.ErrorBoundary,{children:Object(_.jsxs)(H.d,{children:[Object(_.jsx)(H.b,{exact:!0,path:"/",element:Object(_.jsx)(H.a,{to:"/game",replace:!0})}),Object(_.jsx)(H.b,{exact:!0,path:"/game",element:Object(_.jsx)(rt,{})}),Object(_.jsx)(H.b,{exact:!0,path:"/game/:challenge",element:Object(_.jsx)(rt,{})}),Object(_.jsx)(H.b,{exact:!0,path:"/board",element:Object(_.jsx)(H.a,{to:"/board/score_pku",replace:!0})}),Object(_.jsx)(H.b,{exact:!0,path:"/board/:name",element:Object(_.jsx)(Ct,{})}),Object(_.jsx)(H.b,{exact:!0,path:"/info",element:Object(_.jsx)(H.a,{to:"/info/announcements",replace:!0})}),Object(_.jsx)(H.b,{exact:!0,path:"/info/:page",element:Object(_.jsx)(It,{})}),Object(_.jsx)(H.b,{exact:!0,path:"/user/profile",element:Object(_.jsx)(dt,{})}),Object(_.jsx)(H.b,{exact:!0,path:"/user/submissions",element:Object(_.jsx)(pe,{})}),Object(_.jsx)(H.b,{exact:!0,path:"/user/terms",element:Object(_.jsx)(Ot,{})}),Object(_.jsx)(H.b,{exact:!0,path:"/login/other",element:Object(_.jsx)(mt,{})}),Object(_.jsx)(H.b,{exact:!0,path:"/writeup",element:Object(_.jsx)(Ie,{})}),Object(_.jsx)(H.b,{exact:!0,path:"/license",element:Object(_.jsx)(Y,{})}),Object(_.jsx)(H.b,{path:"*",element:Object(_.jsx)(m.c,{})})]})})}),Object(_.jsx)(Nt,{})]})}var St=n(160),Ft=(n(267),Object(_.jsx)(a.a,{autoInsertSpaceInButton:!1,locale:St.a,children:Object(_.jsx)(l.a,{children:Object(_.jsx)(i.a.ErrorBoundary,{children:Object(_.jsx)(L,{children:Object(_.jsx)(Et,{})})})})}));r.a.render(Ft,document.getElementById("root"))},33:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"i",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"g",(function(){return o})),n.d(t,"k",(function(){return j})),n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"c",(function(){return O})),n.d(t,"j",(function(){return h}));var c=n(22),s=n(1),r=document.title,a=Object(s.jsx)("img",{src:"logo-bw.png",alt:"",className:"game-logo"}),i="/service/wish/",l="/service/auth/",o="/service/template/",j="/service/ws/",b="/service/anticheat/",u="/service/attachment/";function d(e,t){return"https://".concat(e.host,"/?token=").concat(t)}var O=Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("p",{children:["\u6bd4\u8d5b\u5b8c\u5168\u7ed3\u675f\u540e\uff0c\u8d44\u6599\u5b58\u6863\u5c06 ",Object(s.jsx)(c.b,{href:"https://github.com/PKU-GeekGame/geekgame-2nd",children:"\u516c\u5f00\u5230 GitHub"}),"\u3002 \u672c\u6bd4\u8d5b\u7684\u6240\u6709\u9898\u9762\u91c7\u7528 ",Object(s.jsx)(c.b,{href:"https://creativecommons.org/licenses/by-nc/4.0/",children:"CC BY-NC 4.0"})," \u534f\u8bae\u8bb8\u53ef\uff0c \u6240\u6709\u9898\u76ee\u6e90\u7801\u91c7\u7528 ",Object(s.jsx)(c.b,{href:"https://opensource.org/licenses/MIT",children:"MIT"})," \u534f\u8bae\u8bb8\u53ef\uff0c \u547d\u9898\u4eba\u548c\u9009\u624b Writeup \u6309\u7167\u4f5c\u8005\u6307\u5b9a\u7684\u65b9\u5f0f\u8fdb\u884c\u8bb8\u53ef\u3002"]}),Object(s.jsx)("p",{children:"\u8bf7\u6ce8\u610f\u4e0a\u8ff0\u8bb8\u53ef\u4e0d\u5305\u62ec\u6bd4\u8d5b\u76f8\u5173\u7684\u5176\u4ed6\u8d44\u6599\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6bd4\u8d5b\u516c\u544a\u3001\u53c2\u8d5b\u987b\u77e5\u3001\u6bd4\u8d5b\u4ecb\u7ecd\u548c\u5176\u4ed6\u5ba3\u4f20\u8d44\u6599\uff09\u3002\u8fd9\u4e9b\u8d44\u6599\u4e0d\u5141\u8bb8\u672a\u6388\u6743\u4f7f\u7528\u3002"})]}),h=Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{children:"\u8bf7\u5728 Writeup \u4e2d\u63cf\u8ff0\u81ea\u5df1\u662f\u5982\u4f55\u89e3\u51fa\u6bcf\u9053\u9898\u76ee\u7684\uff0c\u5176\u6700\u4f4e\u8981\u6c42\u662f\u8ba9\u547d\u9898\u4eba\u76f8\u4fe1\u4f60\u786e\u5b9e\u5728\u6bd4\u8d5b\u671f\u95f4\u72ec\u7acb\u5b8c\u6210\u4e86\u9898\u76ee\u3002 \u5efa\u8bae\u4f7f\u7528 Markdown \u683c\u5f0f\uff0c\u4f46\u6211\u4eec\u4e5f\u63a5\u53d7 .pdf \u6216 .pptx \u683c\u5f0f\u3002"}),Object(s.jsx)("p",{children:"\u5982\u679c\u6709\u9644\u52a0\u6587\u4ef6\uff08\u5982\u89e3\u9898\u4f7f\u7528\u7684\u811a\u672c\uff09\uff0c\u8bf7\u5c06 Writeup \u548c\u6240\u6709\u9644\u52a0\u6587\u4ef6\u6253\u5305\u6210 .7z \u6216 .zip \u683c\u5f0f\u3002 \u6211\u4eec\u4f1a\u5c06\u90e8\u5206\u4f18\u79c0\u9009\u624b Writeup \u516c\u5f00\u5230 GitHub\uff0c\u56e0\u6b64\u8bf7\u6ce8\u610f\u63a7\u5236\u6587\u4ef6\u5927\u5c0f\uff0c\u907f\u514d\u5c06\u9898\u76ee\u9644\u4ef6\u3001\u7f16\u8bd1\u7ed3\u679c\u3001\u4e34\u65f6\u6587\u4ef6\u3001\u7b2c\u4e09\u65b9\u7a0b\u5e8f\u6253\u5305\u5728\u5185\u3002"}),Object(s.jsx)("p",{children:"\u5728\u63d0\u4ea4\u622a\u6b62\u65f6\u95f4\u524d\u8bf7\u52ff\u516c\u5f00 Writeup \u6216\u4ea4\u6d41\u601d\u8def\u3002\u5982\u679c\u4ed6\u4eba\u7684 Writeup \u4e0e\u4f60\u96f7\u540c\uff0c\u4f60\u4e5f\u4f1a\u53d7\u5230\u5f71\u54cd\u3002"})]})}},[[268,1,2]]]);
//# sourceMappingURL=main.77a40a83.chunk.js.map